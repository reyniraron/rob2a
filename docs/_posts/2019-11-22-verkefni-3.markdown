---
layout: post
title:  "Verkefni 3"
date:   2019-11-22 12:00:00 +0000
categories: verkefni
---
## Verkefnalýsing

Verkefni 3 gengur út á að forrita fjarstýringuna svo hægt sé að stýra vélmenninu með henni. Í fyrsta hluta er hún notuð til að stýra mótorum (þ.e. til að keyra og stýra kló) en í seinni hluta er hún notuð með kóðanum úr [3. hluta verkefnis 2]({{ site.baseurl }}/verkefni/2019/11/22/verkefni-2.html#3-hluti) til að stöðva róbótinn. Auk þess er neyðarhnappur virkjaður á vélmenninu sjálfu sem stöðvar það.

## 1. hluti

Í þessum lið á að forrita fjarstýringu til að stýra vélmenninu.

### Kóði

```c
#pragma config(Motor,  port2,           rightMotor,    tmotorServoContinuousRotation, openLoop)
#pragma config(Motor,  port3,           leftMotor,     tmotorServoContinuousRotation, openLoop, reversed)
#pragma config(Motor,  port4,           armMotor,      tmotorServoContinuousRotation, openLoop, reversed)
#pragma config(Motor,  port5,           clawMotor,     tmotorServoContinuousRotation, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*----------------------------------------------------------------------------------------------------*\
|*                                     - Verkefni 3 - 1. hluti -                                      *|
|*                                                                                                    *|
|*  This program uses the left joystick to move the robot forward and backward and the right joystick *|
|*  to turn. Button 8R lifts the arm, 8D lowers the arm, 8U opens the claw and 8L closes it.          *|
|*                                                                                                    *|
\*----------------------------------------------------------------------------------------------------*/

//+++++++++++++++++++++++++++++++++++++++++++++| MAIN |+++++++++++++++++++++++++++++++++++++++++++++++
task main ()
{
    short rightJoyXValue;
    short leftJoyYValue;
  while (true) {
      /* ==============
         Robot movement
         ============== */
      rightJoyXValue = vexRT[Ch1];  // Right joystick X axis
      leftJoyYValue = vexRT[Ch3];   // Left joystick Y axis
      // Turning sideways
    if (rightJoyXValue != 0) {
        motor[leftMotor]  =  rightJoyXValue;
        motor[rightMotor] = -rightJoyXValue;
    }
    // Going forward
    else {
        motor[leftMotor]  = leftJoyYValue;
        motor[rightMotor] = leftJoyYValue;
    }
    /* ===
       Arm
       === */
    // Arm up
    if (vexRT[Btn8R]) {
        motor[armMotor] = 63;
    }
    // Arm down
    else if (vexRT[Btn8D]) {
        motor[armMotor] = -32;
    }
    // Arm stationary
    else {
        motor[armMotor] = 0;
    }
    /* ====
       Claw
       ==== */
    if (vexRT[Btn8U]) {
        motor[clawMotor] = 63;
    }
    else if (vexRT[Btn8L]) {
        motor[clawMotor] = -63;
    }
    else {
        motor[clawMotor] = 0;
    }
  }
}
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
```

### Myndband

{% include youtube.html id='o_D2f6bIKxU' %}

## 2. hluti

Í þessum hluta var endurnýttur kóði úr [3. hluta verkefnis 2]({{ site.baseurl }}/verkefni/2019/11/22/verkefni-2.html#3-hluti). Við hann var bætt taski sem fylgdist með því hvort ýtt væri á neyðarhnapp á fjarstýringu eða á vélmenni.

### Flæðirit

![Flæðirit fyrir 2. hluta verkefnis 3]({{ site.baseurl }}/assets/img/verkefni3/part2/flowchart.png)

### Kóði

```c
task watchForStop() {
    while (true) {
        // RC button     // Touch sensor
        if (vexRT[Btn7L] || SensorValue(touchSensor)) {
            StopAllTasks();
        }
    }
}
```

### Myndband

{% include youtube.html id='egLlq9lEuaM' %}
